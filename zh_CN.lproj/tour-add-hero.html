<h2><a href="/Pbind/doc/tour-add-hero#输入组件" id=输入组件 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>输入组件</h2>
<p>我们需要创建一个表单界面，来添加英雄的 <code>姓名</code> 与 <code>描述</code>，最终的界面看起来像这样：</p>

<p><img src="/Pbind/img/tour-new-hero@2x.png" alt="New Hero"/></p>

<p>这里有两行输入，分别是姓名输入与描述输入，我们分别为之创建一个输入组件。</p>

<p>先建立 <em>姓名输入行组件</em> ： <code>hero-name.input.plist</code>：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="0"><td><span class="button collapse-button"></span><span>Root</span></td><td><span>Dictionary</span></td><td><span class="sub">(3 items)</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>views</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>title</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>clazz</span></td><td><span>String</span></td><td><span>UILabel</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>input</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>clazz</span></td><td><span>String</span></td><td><span>PBInput</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>metrics</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>titleWidth</span></td><td><span>String</span></td><td><span>300</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>constraints</span></td><td><span>Array</span></td><td><span class="sub">(3 items)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 0</span></td><td><span>String</span></td><td><span>|-[title(==titleWidth)]-[input]-|</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 1</span></td><td><span>String</span></td><td><span>V:|-[title]-|</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 2</span></td><td><span>String</span></td><td><span>V:|-[input]-|</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<blockquote>
<p>输入组件的命名规范建议为 &quot;[模块].input&quot;</p>
</blockquote>

<p>再创建 <em>描述输入行组件</em> ： <code>hero-desc.input.plist</code>：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="0"><td><span class="button collapse-button"></span><span>Root</span></td><td><span>Dictionary</span></td><td><span class="sub">(3 items)</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>views</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>title</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>clazz</span></td><td><span>String</span></td><td><span>UILabel</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>input</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>clazz</span></td><td><span>String</span></td><td><span>PBTextView</span></td></tr><tr class="collapsible" data-level="3"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>scrollEnabled</span></td><td><span>Boolean</span></td><td><span>NO</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>metrics</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>titleWidth</span></td><td><span>String</span></td><td><span>300</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>constraints</span></td><td><span>Array</span></td><td><span class="sub">(3 items)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 0</span></td><td><span>String</span></td><td><span>|-[title(==titleWidth)]-[input]-|</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 1</span></td><td><span>String</span></td><td><span>V:|-[title]</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 2</span></td><td><span>String</span></td><td><span>V:|-[input]-|</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>这里的 <code>input</code> 控件分别使用了 <code>PBInput</code> 与 <code>PBTextView</code>，对应单行文本输入与多行文本输入。更多有关输入控件的细节可以参考<a href="/Pbind/doc/PBForm" name="wq-redirect" data-redirect="/Pbind/doc/PBForm">Form组件</a>。</p>
<h2><a href="/Pbind/doc/tour-add-hero#输入表单" id=输入表单 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>输入表单</h2>
<p>接着我们创建一个表单配置 <code>hero-new.form.plist</code>，来组装上面的输入组件：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="0"><td><span class="button collapse-button"></span><span>Root</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>rows</span></td><td><span>Array</span></td><td><span class="sub">(2 items)</span></td></tr><tr class="collapsible" data-level="3"><td><span class="button collapse-button"></span><span>Item 0</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>layout</span></td><td><span>String</span></td><td><span>hero-name.input</span></td></tr><tr class="collapsible" data-level="4"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(3 items)</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@title.text</span></td><td><span>String</span></td><td><span>Name</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@input.name</span></td><td><span>String</span></td><td><span>name</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@input.placeholder</span></td><td><span>String</span></td><td><span>Name</span></td></tr><tr class="collapsible" data-level="3"><td><span class="button collapse-button"></span><span>Item 1</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>layout</span></td><td><span>String</span></td><td><span>hero-desc.input</span></td></tr><tr class="collapsible" data-level="4"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(3 items)</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@title.text</span></td><td><span>String</span></td><td><span>Description</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@input.name</span></td><td><span>String</span></td><td><span>desc</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@input.placeholder</span></td><td><span>String</span></td><td><span>Description</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>注意到这里的 <strong>@input.name</strong> 属性，这将为输入组件定义一个属性域，这个域将作为参数发送到 Client，类似网页里 <code>&lt;form&gt;</code> 表单的 <code>&lt;input name=&quot;name&quot;&gt;</code>。</p>
<h2><a href="/Pbind/doc/tour-add-hero#界面跳转" id=界面跳转 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>界面跳转</h2>
<p>回到 <code>main.tableview.plist</code>，我们来为导航栏添加右侧按钮，以跳转到我们的 <code>添加英雄</code> 界面：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>nav</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>title</span></td><td><span>String</span></td><td><span>Heroes</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>right</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>:add</span></td></tr><tr class="collapsible" data-level="3"><td><span class="button collapse-button"></span><span>action</span></td><td><span>Dictionary</span></td><td><span class="sub">(3 items)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>push</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>target</span></td><td><span>String</span></td><td><span>PBFormController</span></td></tr><tr class="collapsible" data-level="4"><td><span class="button collapse-button"></span><span>params</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>title</span></td><td><span>String</span></td><td><span>New Hero</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>plist</span></td><td><span>String</span></td><td><span>hero-new.form</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>保存文件，现在首页右上角已经出现了 [+] 按钮，点击后将跳转到我们的表单界面。</p>
<h2><a href="/Pbind/doc/tour-add-hero#数据关联" id=数据关联 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数据关联</h2>
<p>我们现在已经可以输入姓名跟描述了，不过我想做点有意思的事：“在姓名输入的时候，自动填写一个描述”。</p>

<p>我们来使用数据绑定搞定这个事情，为 <code>hero-new.form.plist</code> 第二行的属性添加 <strong>@input.text</strong> 绑定：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr data-level="1"><td><span class="button collapse-button"></span><span>@input.text</span></td><td><span>String</span></td><td><span>%!(Description of %@),=&gt;name</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>这个表达式的几个细节：</p>

<ol>
<li>使用了 <strong>=&gt;name</strong> 表达式，<strong>=</strong>为单向绑定，<strong>&gt;name</strong>对应属性域为 <code>name</code> 的输入控件(即姓名输入控件)的文本值</li>
<li>使用 <strong>%!</strong> 格式化，这使得当 <strong>&gt;name</strong> 为空时，整个表达式返回空，而不是 <code>Description of</code></li>
</ol>

<p>现在的效果看起来像这样：</p>

<p><img src="/Pbind/img/form-binding-x2.gif" alt="Form binding"/></p>
<h2><a href="/Pbind/doc/tour-add-hero#提交表单" id=提交表单 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>提交表单</h2>
<p>现在我们来为表单加上一个按钮，以提交表单，创建 <em>提交组件</em> <code>submit.input.plist</code>：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="0"><td><span class="button collapse-button"></span><span>Root</span></td><td><span>Dictionary</span></td><td><span class="sub">(3 items)</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>views</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>button</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>clazz</span></td><td><span>String</span></td><td><span>UIButton</span></td></tr><tr class="collapsible" data-level="3"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>clipsToBounds</span></td><td><span>Boolean</span></td><td><span>YES</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>layer.cornerRadius</span></td><td><span>Number</span></td><td><span>5</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>metrics</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>left</span></td><td><span>String</span></td><td><span>37</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>top</span></td><td><span>String</span></td><td><span>70</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>constraints</span></td><td><span>Array</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 0</span></td><td><span>String</span></td><td><span>|-left-[button]-left-|</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 1</span></td><td><span>String</span></td><td><span>V:|-top-[button]-top-|</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>修改 <code>hero-new.form.plist</code>，为 <strong>rows</strong> 再添加一行元素：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>Item 2</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>layout</span></td><td><span>String</span></td><td><span>submit.input</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>@button.backgroundColor</span></td><td><span>String</span></td><td><span>#2baf2b</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>@button.title</span></td><td><span>String</span></td><td><span>Submit</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>最后为按钮加上 <code>Action</code>：</p>
<div class="highlight highlight-source-text"><pre>未完待续……
</pre></div>
