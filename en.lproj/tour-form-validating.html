<h2><a href="/Pbind/en/tour-form-validating#必填限制" id=必填限制 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>必填限制</h2>
<p>上一步我们已经实现了一个表单，不过大家可能注意到当英雄的名称为空的时候，表单依然被提交了。我们需要对此做些控制。</p>

<p>回到 <code>hero-new.form.plist</code>，为英雄名称所在的输入控件，添加 <strong>required</strong> 控制：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr data-level="1" data-value="<true/>"><td><span class="button collapse-button"></span><span>@input.required</span></td><td><span>Boolean</span></td><td><span>YES</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>现在名称为空时已经无法提交了，我们需要展示一些错误来让交互更友好。</p>

<p>在这之前，先调整下配置，因为有一波 <strong>@input.**</strong> 属性需要配置，我们把 <strong>@input</strong> 提取出来，让配置更清晰：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>@title.text</span></td><td><span>String</span></td><td><span>Name</span></td></tr><tr class="collapsible" data-level="2" data-empty="1"><td><span class="button collapse-button"></span><span>@input</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>name</span></td><td><span>String</span></td><td><span>name</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>placeholder</span></td><td><span>String</span></td><td><span>Name</span></td></tr><tr data-level="3" data-value="<true/>"><td><span class="button collapse-button"></span><span>required</span></td><td><span>Boolean</span></td><td><span>YES</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div><h2><a href="/Pbind/en/tour-form-validating#错误提示" id=错误提示 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>错误提示</h2>
<p>接着为 <strong>@input</strong> 配置 <strong>errorRow</strong> ：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="1" data-empty="1"><td><span class="button collapse-button"></span><span>errorRow</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>layout</span></td><td><span>String</span></td><td><span>input.error</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>再创建对应的 layout <code>input.error.plist</code>：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="0"><td><span class="button collapse-button"></span><span>Root</span></td><td><span>Dictionary</span></td><td><span class="sub">(3 items)</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>views</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>icon</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>clazz</span></td><td><span>String</span></td><td><span>UILabel</span></td></tr><tr class="collapsible" data-level="3" data-empty="1"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>text</span></td><td><span>String</span></td><td><span>* </span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>textColor</span></td><td><span>String</span></td><td><span>#ff0000</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>tips</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>clazz</span></td><td><span>String</span></td><td><span>UILabel</span></td></tr><tr class="collapsible" data-level="3" data-empty="1"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>textColor</span></td><td><span>String</span></td><td><span>#ff0000</span></td></tr><tr class="collapsible" data-level="1" data-empty="1"><td><span class="button collapse-button"></span><span>metrics</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>left</span></td><td><span>String</span></td><td><span>390</span></td></tr><tr class="collapsible" data-level="1" data-empty="1"><td><span class="button collapse-button"></span><span>formats</span></td><td><span>Array</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 0</span></td><td><span>String</span></td><td><span>|-left-[icon][tips]</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 1</span></td><td><span>String</span></td><td><span>V:|[icon]|</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>Item 2</span></td><td><span>String</span></td><td><span>V:|[tips]|</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>注意这里的视图别名 <strong>tips</strong>，将被 <strong>errorRow</strong> 识别，自动绑定到对应输入控件的错误信息。</p>

<p>现在名称为空提交时，将展现出错误提示 “Required”，这个是默认的必填提示，我们可以通过 <strong>requiredTips</strong> 来定制：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr data-level="1"><td><span class="button collapse-button"></span><span>requiredTips</span></td><td><span>String</span></td><td><span>Name is required</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>保存文件：</p>

<p><img src="/Pbind/img/input-error@2x.png" alt="input-error"/></p>

<p>错误提示成功展示了，不过可能你想在输入正确时即时隐藏错误，这需要开启表单的实时校验功能。</p>

<p>在 <code>hero-new.form.plist</code> 的 <code>Root &gt; properties</code>  下为当前表单增加 <strong>validating</strong> 配置：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr data-level="1"><td><span class="button collapse-button"></span><span>validating</span></td><td><span>String</span></td><td><span>:changed</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>保存文件：</p>

<p><img src="/Pbind/img/tour-new-hero-changed.gif" alt="changed"/></p>

<p>我们可以配置更多属性，包括限制最大输入长度，使用正则匹配等等，细节可以参考<a href="/Pbind/en/pbinput" name="wq-redirect" data-redirect="en/pbinput">PBInput控件</a>。</p>
<h2><a href="/Pbind/en/tour-form-validating#总结与下一步" id=总结与下一步 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结与下一步</h2>
<p>最终的 <code>hero-new.form.plist</code>：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="0"><td><span class="button collapse-button"></span><span>Root</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>validating</span></td><td><span>String</span></td><td><span>:changed</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>rows</span></td><td><span>Array</span></td><td><span class="sub">(3 items)</span></td></tr><tr class="collapsible" data-level="3"><td><span class="button collapse-button"></span><span>Item 0</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>layout</span></td><td><span>String</span></td><td><span>hero-name.input</span></td></tr><tr class="collapsible" data-level="4"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@title.text</span></td><td><span>String</span></td><td><span>Name</span></td></tr><tr class="collapsible" data-level="5"><td><span class="button collapse-button"></span><span>@input</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="6"><td><span class="button collapse-button"></span><span>name</span></td><td><span>String</span></td><td><span>name</span></td></tr><tr data-level="6"><td><span class="button collapse-button"></span><span>placeholder</span></td><td><span>String</span></td><td><span>Name</span></td></tr><tr data-level="6" data-value="<true/>"><td><span class="button collapse-button"></span><span>required</span></td><td><span>Boolean</span></td><td><span>YES</span></td></tr><tr data-level="6"><td><span class="button collapse-button"></span><span>requiredTips</span></td><td><span>String</span></td><td><span>Name is required</span></td></tr><tr class="collapsible" data-level="6" data-empty="1"><td><span class="button collapse-button"></span><span>errorRow</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="7"><td><span class="button collapse-button"></span><span>layout</span></td><td><span>String</span></td><td><span>input.error</span></td></tr><tr class="collapsible" data-level="3"><td><span class="button collapse-button"></span><span>Item 1</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>layout</span></td><td><span>String</span></td><td><span>hero-desc.input</span></td></tr><tr class="collapsible" data-level="4" data-empty="1"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@title.text</span></td><td><span>String</span></td><td><span>Description</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@input.text</span></td><td><span>String</span></td><td><span>%!(Description of %@),=&gt;name</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@input.name</span></td><td><span>String</span></td><td><span>desc</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@input.placeholder</span></td><td><span>String</span></td><td><span>Description</span></td></tr><tr class="collapsible" data-level="3"><td><span class="button collapse-button"></span><span>Item 2</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>layout</span></td><td><span>String</span></td><td><span>submit.input</span></td></tr><tr class="collapsible" data-level="4"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@button.backgroundColor</span></td><td><span>String</span></td><td><span>#2baf2b</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>@button.title</span></td><td><span>String</span></td><td><span>Submit</span></td></tr><tr class="collapsible" data-level="5"><td><span class="button collapse-button"></span><span>@button.action</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="6"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>submit</span></td></tr><tr class="collapsible" data-level="6"><td><span class="button collapse-button"></span><span>next.done</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="7"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>post</span></td></tr><tr data-level="7"><td><span class="button collapse-button"></span><span>name</span></td><td><span>String</span></td><td><span>heroes</span></td></tr><tr class="collapsible" data-level="7"><td><span class="button collapse-button"></span><span>next.done</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="8"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>pop</span></td></tr><tr class="collapsible" data-level="8" data-empty="1"><td><span class="button collapse-button"></span><span>next.done</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="9"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>addRow</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>通过本节，我们学习了 Pbind 的表单校验功能：</p>

<ol>
<li>使用 <strong>required</strong> 设置必填</li>
<li>使用 <strong>errorRow</strong> 显示错误提示</li>
<li>使用 <strong>requiredTips</strong> 定制必填错误提示</li>
</ol>

<p><a href="/Pbind/en/tour-delete-hero" name="wq-redirect" data-redirect="en/tour-delete-hero">下一步</a>我们来完成英雄删除操作。</p>
