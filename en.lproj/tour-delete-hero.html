<h2><a href="/Pbind/en/tour-delete-hero#删除英雄" id=删除英雄 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除英雄</h2>
<p>首先分解下需求：</p>

<ol>
<li>交互上我们使用 <code>UITableView</code> 的左滑删除</li>
<li>接着发起一个 <em>DELETE</em> 请求：</li>
<li>根据 <em>RESTFul</em> 原则，当返回状态码 <strong>204</strong> (No Content) 的时候，执行 <code>UITableView</code> 的删除行操作。</li>
</ol>

<p>我们依然使用 <code>Action</code> 来串起这个流程。</p>
<h2><a href="/Pbind/en/tour-delete-hero#左滑交互" id=左滑交互 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>左滑交互</h2>
<p>在 <code>main.tableview.plist</code> 的 <code>Root &gt; properties &gt; row &gt; actions</code> 添加 <code>delete</code> 行为：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>delete</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>delete</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>name</span></td><td><span>String</span></td><td><span>heroes/:id</span></td></tr><tr class="collapsible" data-level="2" data-empty="1"><td><span class="button collapse-button"></span><span>next.done</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>deleteRow</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>注意这里的第一个 <strong>delete</strong> 是对应于 <em>行事件</em>，配置后将激活表现层的左滑交互行为。第二个 <strong>delete</strong> 是对应于业务层的 <em>DELETE</em> 请求。第三个 <strong>deleteRow</strong> 则是最终的表现层删除行操作。</p>
<h2><a href="/Pbind/en/tour-delete-hero#模拟-delete-请求" id=模拟-delete-请求 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模拟 DELETE 请求</h2><div class="highlight highlight-source-text"><pre>DELETE heroes/:id
</pre></div>
<p>在工程目录，使用命令行：</p>
<div class="highlight highlight-source-text"><pre>pbind mock PBClient heroes/:id@delete
</pre></div>
<p>修改生成的 <code>heroes-:id@delete.json</code>：</p>
<div class="highlight highlight-source-json"><pre><span class="p">{</span>
  <span class="nt">&quot;$status&quot;</span><span class="p">:</span> <span class="mi">204</span>
<span class="p">}</span>
</pre></div>
<p>注意这里的保留关键字 <strong>$status</strong> 将模拟响应状态码。</p>
<h2><a href="/Pbind/en/tour-delete-hero#删除行" id=删除行 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除行</h2>
<p>当状态码返回 <strong>204</strong> 时，<strong>deleteRow</strong> 行为得以正常启动，将自动移除 <code>UITableView</code> 的编辑行。</p>

<p><img src="/Pbind/img/tour-delete-hero.gif" alt="delete-hero"/></p>
<h2><a href="/Pbind/en/tour-delete-hero#总结与下一步" id=总结与下一步 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结与下一步</h2>
<p>最终的 <code>main.tableview.plist</code>：</p>
<div name="plist-content"><table class="plist"><tbody><tr><th style="width: 40%">Key</th><th style="width: 25%">Type</th><th style="width: 35%">Value</th></tr></tbody><tbody><tr class="collapsible" data-level="0"><td><span class="button collapse-button"></span><span>Root</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>nav</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>title</span></td><td><span>String</span></td><td><span>Heroes</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>right</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>:add</span></td></tr><tr class="collapsible" data-level="3"><td><span class="button collapse-button"></span><span>action</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>push</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>target</span></td><td><span>String</span></td><td><span>PBFormController</span></td></tr><tr class="collapsible" data-level="4" data-empty="1"><td><span class="button collapse-button"></span><span>params</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>title</span></td><td><span>String</span></td><td><span>New Hero</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>plist</span></td><td><span>String</span></td><td><span>hero-new.form</span></td></tr><tr class="collapsible" data-level="1"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr class="collapsible" data-level="2" data-empty="1"><td><span class="button collapse-button"></span><span>pagingParams</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>clients</span></td><td><span>Array</span></td><td><span class="sub">(1 item)</span></td></tr><tr class="collapsible" data-level="3" data-empty="1"><td><span class="button collapse-button"></span><span>Item 0</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>clazz</span></td><td><span>String</span></td><td><span>PBClient</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>action</span></td><td><span>String</span></td><td><span>heroes</span></td></tr><tr class="collapsible" data-level="2"><td><span class="button collapse-button"></span><span>row</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr data-level="3"><td><span class="button collapse-button"></span><span>layout</span></td><td><span>String</span></td><td><span>hero.cell</span></td></tr><tr class="collapsible" data-level="3" data-empty="1"><td><span class="button collapse-button"></span><span>properties</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>@name.text</span></td><td><span>String</span></td><td><span>.$name</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>@desc.text</span></td><td><span>String</span></td><td><span>.$desc</span></td></tr><tr data-level="4"><td><span class="button collapse-button"></span><span>separatorInset</span></td><td><span>String</span></td><td><span>{0,0,0,0}</span></td></tr><tr class="collapsible" data-level="3"><td><span class="button collapse-button"></span><span>actions</span></td><td><span>Dictionary</span></td><td><span class="sub">(2 items)</span></td></tr><tr class="collapsible" data-level="4"><td><span class="button collapse-button"></span><span>select</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>push</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>target</span></td><td><span>String</span></td><td><span>PBTableViewController</span></td></tr><tr class="collapsible" data-level="5" data-empty="1"><td><span class="button collapse-button"></span><span>params</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="6"><td><span class="button collapse-button"></span><span>title</span></td><td><span>String</span></td><td><span>.$name</span></td></tr><tr data-level="6"><td><span class="button collapse-button"></span><span>plist</span></td><td><span>String</span></td><td><span>hero-detail.tableview</span></td></tr><tr data-level="6"><td><span class="button collapse-button"></span><span>data</span></td><td><span>String</span></td><td><span>.$</span></td></tr><tr class="collapsible" data-level="4"><td><span class="button collapse-button"></span><span>delete</span></td><td><span>Dictionary</span></td><td><span class="sub">(1 item)</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>delete</span></td></tr><tr data-level="5"><td><span class="button collapse-button"></span><span>name</span></td><td><span>String</span></td><td><span>heroes/:id</span></td></tr><tr class="collapsible" data-level="5" data-empty="1"><td><span class="button collapse-button"></span><span>next.done</span></td><td><span>Dictionary</span></td><td><span class="sub">(0 items)</span></td></tr><tr data-level="6"><td><span class="button collapse-button"></span><span>type</span></td><td><span>String</span></td><td><span>deleteRow</span></td></tr><tr data-level="2"><td><span class="button collapse-button"></span><span>listKey</span></td><td><span>String</span></td><td><span>list</span></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
<p>通过本节我们学习了 Pbind 的删除行为配置：</p>

<ol>
<li>配置 <code>UITableView</code> 左滑删除</li>
<li>发起 <em>DELETE</em> 请求</li>
<li>触发 <code>UITableView</code> 行删除行为</li>
</ol>
